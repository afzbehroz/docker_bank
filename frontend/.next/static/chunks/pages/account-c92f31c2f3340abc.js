(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[309],{1464:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/account",function(){return a(4624)}])},4624:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var r=a(4848),o=a(6540);function l(){let[e,t]=(0,o.useState)(null),[a,l]=(0,o.useState)(""),[s,n]=(0,o.useState)("");(0,o.useEffect)(()=>{(async()=>{let e=localStorage.getItem("authToken");if(!e){n("You are not logged in!");return}try{let a=await fetch("http://localhost:3001/me/accounts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})});if(a.ok){let e=await a.json();t(e.balance)}else{let e=await a.text();console.error("Error:",e),n("Failed to fetch account details.")}}catch(e){console.error("Fetch error:",e),n("Server error. Please try again later.")}})()},[]);let c=async e=>{e.preventDefault();let r=localStorage.getItem("authToken");if(!r){n("You are not logged in!");return}if(!a||a<=0){n("Please enter a valid deposit amount.");return}try{let e=await fetch("http://localhost:3001/me/accounts/transactions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:r,amount:parseFloat(a)})});if(e.ok){let a=await e.json();t(a.balance),n("Deposit successful!"),l("")}else{let t=await e.text();console.error("Error:",t),n("Failed to process deposit.")}}catch(e){console.error("Deposit error:",e),n("Server error. Please try again later.")}};return(0,r.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-100",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4 text-gray-600",children:"Account Details"}),s&&(0,r.jsx)("p",{className:"text-lg text-red-500 mb-4",children:s}),null!==e&&(0,r.jsxs)("p",{className:"text-lg text-black mb-6",children:["Your Balance: ",e," SEK"]}),(0,r.jsxs)("form",{onSubmit:c,className:"bg-white p-6 rounded-md shadow-md w-full max-w-md",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"deposit",className:"block text-sm font-medium text-black",children:"Deposit Amount"}),(0,r.jsx)("input",{type:"number",id:"deposit",value:a,onChange:e=>l(e.target.value),className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-black sm:text-sm",placeholder:"Enter deposit amount",required:!0})]}),(0,r.jsx)("button",{type:"submit",className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Deposit"})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(1464)),_N_E=e.O()}]);